<?php//// List of all articles//function articles_all(){	// Request.	$query = "SELECT * FROM articles ORDER BY article_id ASC";	$result = mysql_query($query);								if (!$result)		die(mysql_error());		// Extracting from the DB.	$n = mysql_num_rows($result);	$articles = array();	for ($i = 0; $i < $n; $i++)	{		//преобразуем $result в ассоциативный массив		$row = mysql_fetch_assoc($result);				$articles[] = $row;	}		return $articles;}//// Конкретная статья//function article_get($id){	$id = intval($id);	$query = "SELECT * FROM articles WHERE article_id = $id";	$res = mysql_query($query);	$row = mysql_fetch_row($res);		if (!$res)		die(mysql_error());	return $row;}//// Добавить статью//function article_new($title, $content){	// Подготовка.	$title = trim($title);	$content = trim($content);	// Проверка.	if ($title == '')		return false;		// Запрос.	$t = "INSERT INTO articles (title, content) VALUES ('%s', '%s')";		$query = sprintf($t, 	                 mysql_real_escape_string($title),	                 mysql_real_escape_string($content));		$res = mysql_query($query);								if (!$res)		die(mysql_error());			return true;}//// Изменить статью//function article_edit($id_article, $title, $content){	// подготовка	$title = trim($title);	$content = trim($content);    $article_id = intval($id_article);    // запрос    // $z = " INSERT INTO articles (title, content) VALUES ('%s', '%s')     //        WHERE article_id = '$article_id' ";        $clean_title = mysql_real_escape_string($title);    $clean_content = mysql_real_escape_string($content);    $query = "UPDATE articles SET               title = '$clean_title',              content = '$clean_content'              WHERE article_id = '$article_id' ";    // $query = sprintf($z,     // 				 mysql_real_escape_string($title),    // 				 mysql_real_escape_string($content));    $result = mysql_query($query);    if (!$result)    	die(mysql_error());    return true;}//// Удалить статью//function article_delete($id_article){	$article_id = (int)$id_article;	$z = "DELETE FROM articles WHERE article_id = '$article_id' ";	$result = mysql_query($z);	if (!$result)		die(mysql_error());	return true;}//// teaser//function article_intro($article){	// $article - это ассоциативный массив, представляющий статью    $a_content = $article['content'];    $a_teaser = mb_substr($a_content, 0, mb_strpos($a_content, ".", 30));    // var_dump($a_teaser);    return $a_teaser;}